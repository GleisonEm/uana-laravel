(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{5516:function(e,a,t){e.exports=t.p+"img/default-image.3ad98a37.png"},f0eb:function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"q-pa-md",staticStyle:{flex:"1"}},[t("div",{staticClass:"q-gutter-y-md"},[t("q-card",[t("q-toolbar",{staticClass:"bg-primary text-white shadow-2"},[t("q-toolbar-title",[e._v("Conversas")])],1),t("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:e.tab,callback:function(a){e.tab=a},expression:"tab"}},[t("q-tab",{attrs:{name:"general",label:"Principal"}}),t("q-tab",{attrs:{name:"classes",label:"Turmas"}})],1),t("q-separator"),t("q-tab-panels",{attrs:{animated:""},model:{value:e.tab,callback:function(a){e.tab=a},expression:"tab"}},[t("q-tab-panel",{staticStyle:{height:"70vh",display:"flex","flex-direction":"column"},attrs:{name:"general"}},[t("q-list",e._l(e.converses,(function(a){return t("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:a._id,staticClass:"q-mb-sm",attrs:{clickable:""},on:{click:function(t){return e.navigateToConversePrivate(a._id)}}},[t("q-item-section",{attrs:{avatar:""}},[t("q-avatar",[t("img",{attrs:{src:a.image?a.image:e.defaultAvatar}})])],1),t("q-item-section",[t("q-item-label",[e._v(e._s(a.name))]),t("q-item-label",{attrs:{caption:"",lines:"1"}},[e._v(e._s(a.messages[0]?a.messages[0].message:""))])],1)],1)})),1)],1),t("q-tab-panel",{staticStyle:{height:"70vh",display:"flex","flex-direction":"column"},attrs:{name:"classes"}},[t("q-list",e._l(e.groupClasses,(function(a){return t("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:a._id,staticClass:"q-mb-sm",attrs:{clickable:""}},[t("div",{on:{click:function(t){return e.navigateToConversePrivate(a._id)}}},[t("q-item-section",{attrs:{avatar:""}},[t("q-avatar",[t("img",{attrs:{src:"https://cdn.quasar.dev/img/"+a.avatar}})])],1),t("q-item-section",[t("q-item-label",[e._v(e._s(a.name))]),t("q-item-label",{attrs:{caption:"",lines:"1"}},[e._v(e._s(a.messages[0]?a.messages[0].message:""))])],1),t("q-item-section",{attrs:{side:""}},[t("q-icon",{attrs:{name:"chat_bubble",color:"green"},on:{click:function(t){return e.navigateToConversePrivate(a._id)}}})],1)],1)])})),1)],1)],1),t("div",{staticClass:"q-mb-sm",staticStyle:{padding:"10px"},attrs:{align:"right"}},[t("q-fab",{attrs:{label:"Iniciar uma conversa","external-label":"","vertical-actions-align":"left","label-position":"left",color:"primary",icon:"chat",direction:"up",align:"right"},model:{value:e.fab2,callback:function(a){e.fab2=a},expression:"fab2"}},[t("q-fab-action",{attrs:{"label-class":"bg-grey-3 text-grey-8","external-label":"",color:"secondary",icon:"group","label-position":"left",label:"Privada"},on:{click:function(a){return e.navigateToCreateConversePrivate()}}}),t("q-fab-action",{attrs:{"label-class":"bg-grey-3 text-grey-8","external-label":"",color:"primary","label-position":"left",icon:"groups",label:"Turma"}})],1)],1)],1)],1)])},i=[],n=t("a4d6"),r=t("2f62"),o={components:{},sockets:{connection:function(){console.log("socket connected KKKKKKKKKKKKKKKKKK")},customEmit:function(e){console.log('this method was fired by the socket server. eg: io.emit("customEmit", data)')}},name:"Chat",computed:{...Object(r["c"])({user:"user"})},data:()=>({defaultAvatar:t("5516"),conversationId:"6219124fc392c345cde298e10",items:[],publishing:!1,classData:null,loading:!0,name:"",tab:"general",fab1:!0,fab2:!1,converses:[],groupClasses:[]}),mounted(){this.getConverses(),this.getGroups()},methods:{navigateToCreateConversePrivate(){this.$router.push({name:"ContactsConverse",params:{title:"Nova Conversa"}})},async getConverses(){this.loading=!0;const e=await n["a"].getConverses({userId:this.user.data.id,type:"converse"});if(this.loading=!1,console.log(e,this.user.data.id),!e.success)return!1;this.converses=e.converses.reverse(),console.log("conversas",this.converses)},async getGroups(){this.loading=!0;const e=await n["a"].getConverses({userId:this.user.data.id,type:"group"});if(this.loading=!1,console.log(e,this.user.data.id),!e.success)return!1;this.groupClasses=e.converses.reverse()},navigateToConversePrivate(e){console.log("clika",e),this.$router.push({name:"ConverseDetails",params:{conversationId:e}})},onContentAdded(){},submit(){var e=this.name,a={message:e,userSendId:"6219124fc392c345cde298e6f",conversationId:"6219124fc392c345cde298e10"};this.items.push(a),this.$socket.emit("message",a),console.log("robinn")}}},l=o,c=t("2877"),m=t("f09f"),d=t("65c6"),b=t("6ac5"),u=t("429b"),v=t("7460"),g=t("eb85"),p=t("adad"),f=t("823b"),h=t("1c1c"),q=t("66e5"),C=t("4074"),y=t("cb32"),_=t("0170"),k=t("0016"),x=t("c294"),K=t("72db"),Q=t("714f"),T=t("eebe"),w=t.n(T),I=Object(c["a"])(l,s,i,!1,null,null,null);a["default"]=I.exports;w()(I,"components",{QCard:m["a"],QToolbar:d["a"],QToolbarTitle:b["a"],QTabs:u["a"],QTab:v["a"],QSeparator:g["a"],QTabPanels:p["a"],QTabPanel:f["a"],QList:h["a"],QItem:q["a"],QItemSection:C["a"],QAvatar:y["a"],QItemLabel:_["a"],QIcon:k["a"],QFab:x["a"],QFabAction:K["a"]}),w()(I,"directives",{Ripple:Q["a"]})}}]);